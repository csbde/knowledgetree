KnowledgeTree Upgrade instructions
==================================

Before you upgrade
------------------

Before you upgrade, ensure that your data (KnowledgeTree, Documents, and
database) is backed up safely.  An upgrade may fail to accurately change
the data to the format required by the next version of KnowledgeTree,
and a backup will allow you to return to the original version of
KnowledgeTree.  Please report failed upgrades to the KnowledgeTree
developers.

Ensure that the web user may write to all the folders within the 'var'
folder, so that logging and other changes are possible.

Make sure to read the "Additional steps" section towards the end of the
document to ensure that any specific steps for your upgrade are
performed before you continue.

Automated upgrade
-----------------

The automated upgrade may be used from the command line or through a web
page.  The web page is preferable, as it provides better error
reporting.  The automated upgrade works between any version of
KnowledgeTree to the current version.  The automated upgrade remembers
which upgrades it has performed, and will not perform them again, unless
forced to do so.  Using the automated upgrade will create an upgrade
history that can be reviewed via the KnowledgeTree administrators
interface.

If you are upgrading KnowledgeTree from versions prior to 3.0.0, see the
section at the bottom of this document to set up automated upgrades.

Web page:

- If your KnowledgeTree installation is at http://example.org/kt/,
  visit:

  http://example.org/kt/setup/upgrade.php

- Review the upgrades available to you, and select the button to perform
  the upgrade.

- Review the results of the upgrade.

Command line:

- Run bin/automated-upgrade.php
- Any errors will be reported.

==========================================================================


Additional steps
----------------

KnowledgeTree 2.0.6
-------------------

The automated upgrade requires that you set up a database administrator
user (name configurable in config/environment.php, defaults to
'dmsadmin') for the upgrade process to function.  You need to run this
command on your database (say, 'dms') from the MySQL command prompt:

mysql> use dms;
mysql> GRANT ALL PRIVILEGES ON * TO dmsadmin@localhost IDENTIFIED BY 'js9281djw';

In config/environment.php, you should add:

$default->dbAdminUser      = "dmsadmin";
$default->dbAdminPass      = "js9281djw";

You should now be able to use the automated upgrade.

KnowledgeTree 3.0.0
-------------------

KnowledgeTree 3.0 includes the move of the default document storage
location from "Documents" in the root of the KnowledgeTree install to
"var/Documents".  The "log" directory has also moved to "var/log".

If you are using the default document storage location (ie, you have not
specifically set another document location), move the Documents
directory to "var/Documents before upgrading.


---------------------------------------------------------------------------

KnowledgeTree Document Management System
Web page: http://www.ktdms.com/
Wiki: http://support.ktdms.com/confluence/
Forums: http://forum.ktdms.com/
Bug reporting: http://support.ktdms.com/

$Id$
